{"ast":null,"code":"var _jsxFileName = \"F:\\\\react-bootcamp\\\\Chat-Numbers\\\\client\\\\src\\\\App.js\";\n// In SRC directory\nimport React from 'react';\nimport './App.css'; //import Chat from './Chat';\n\nimport { Buttons } from './Component/Buttons';\nimport { Input } from './Component/Input';\nimport { ClearButton } from './Component/ClearButton';\nimport ChatMessage from './chatMessage';\nimport * as math from 'mathjs';\nimport PropTypes from 'prop-types'; // import Button from 'react-bootstrap/Button';\n// import * as math from 'https://unpkg.com/mathjs@6.2.3/dist/math.js';\n// let HOST = window.location.origin.replace(/^http/, 'ws')\n// const Html5WebSocket = require('html5-websocket');\n// const ReconnectingWebSocket = require('reconnecting-websocket');\n\nlet isServerLocal = true; // let ws_host = 'https://calci-chat.herokuapp.com/';\n// let ws_port = process.env.PORT || 80;\n\nlet ws_host = 'localhost';\nlet ws_port = '3000';\n\nif (isServerLocal == true) {\n  let ws_host = 'localhost';\n  let ws_port = '3030';\n} // const HOST = 'ws://localhost:3030'\n// const options = { constructor: Html5WebSocket };\n// const rws = new ReconnectingWebSocket('ws://' + ws_host + ':' + ws_port + '/ws', undefined);\n\n\nconst rws = new WebSocket('ws://' + ws_host + ':' + ws_port + '/ws'); // rws.timeout = 1000;\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.addToInput = val => {\n      this.setState({\n        input: this.state.input + val\n      });\n    };\n\n    this.addMessage = val => {\n      this.setState({\n        messages1: [val, ...this.state.messages1]\n      });\n    };\n\n    this.handleEqual = messageString => {\n      let message1 = this.state.input + ' = ' + math.evaluate(this.state.input);\n      const data = {\n        name: this.state.name,\n        message: message1\n      };\n      rws.send(JSON.stringify(data));\n      this.setState({\n        input: message1,\n        messages: [data, ...this.state.messages],\n        messages1: [data, ...this.state.messages1]\n      });\n    };\n\n    this.state = {\n      name: \"\",\n      input: \"\",\n      messages1: [],\n      messages: []\n    };\n  } // ws = new WebSocket(HOST)\n\n\n  componentDidMount() {\n    rws.onopen = () => {\n      // on connecting, do nothing but log it to the console\n      console.log('connected');\n    };\n\n    rws.onmessage = evt => {\n      // on receiving a message, add it to the list of messages\n      const val = JSON.parse(evt.data);\n      this.addMessage(val);\n    };\n\n    rws.onclose = () => {\n      console.log('disconnected'); // automatically try to reconnect on connection loss\n\n      this.setState({\n        rws: new WebSocket('ws://' + ws_host + ':' + ws_port + '/ws')\n      });\n    };\n  } // propTypes = {\n  //   onSubmitMessage: PropTypes.func.isRequired,\n  // }\n\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"split\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"calc-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      input: this.state.input,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Buttons, {\n      handleClick: this.addToInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 15\n      }\n    }, \"7\"), /*#__PURE__*/React.createElement(Buttons, {\n      handleClick: this.addToInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 15\n      }\n    }, \"8\"), /*#__PURE__*/React.createElement(Buttons, {\n      handleClick: this.addToInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 15\n      }\n    }, \"9\"), /*#__PURE__*/React.createElement(Buttons, {\n      handleClick: this.addToInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 15\n      }\n    }, \"/\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Buttons, {\n      handleClick: this.addToInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 15\n      }\n    }, \"4\"), /*#__PURE__*/React.createElement(Buttons, {\n      handleClick: this.addToInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 15\n      }\n    }, \"5\"), /*#__PURE__*/React.createElement(Buttons, {\n      handleClick: this.addToInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 15\n      }\n    }, \"6\"), /*#__PURE__*/React.createElement(Buttons, {\n      handleClick: this.addToInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 15\n      }\n    }, \"*\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Buttons, {\n      handleClick: this.addToInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 15\n      }\n    }, \"1\"), /*#__PURE__*/React.createElement(Buttons, {\n      handleClick: this.addToInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 15\n      }\n    }, \"2\"), /*#__PURE__*/React.createElement(Buttons, {\n      handleClick: this.addToInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 15\n      }\n    }, \"3\"), /*#__PURE__*/React.createElement(Buttons, {\n      handleClick: this.addToInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 15\n      }\n    }, \"+\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Buttons, {\n      handleClick: this.addToInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 15\n      }\n    }, \".\"), /*#__PURE__*/React.createElement(Buttons, {\n      handleClick: this.addToInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 15\n      }\n    }, \"0\"), /*#__PURE__*/React.createElement(Buttons, {\n      handleClick: () => this.handleEqual(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 15\n      }\n    }, \"=\"), /*#__PURE__*/React.createElement(Buttons, {\n      handleClick: this.addToInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 15\n      }\n    }, \"-\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(ClearButton, {\n      handleClear: () => this.setState({\n        input: \"\"\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 15\n      }\n    }, \"Clear\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 11\n      }\n    }, \" Welcome \", this.state.name), /*#__PURE__*/React.createElement(\"form\", {\n      action: \".\",\n      onSubmit: e => {\n        e.preventDefault();\n        this.setState({\n          name: ''\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      id: 'name',\n      placeholder: 'Enter your name...',\n      value: this.state.name,\n      onChange: e => this.setState({\n        name: e.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 19\n      }\n    })))), this.state.messages1.map((message, index) => /*#__PURE__*/React.createElement(ChatMessage, {\n      key: index,\n      message: message.message,\n      name: message.name,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["F:/react-bootcamp/Chat-Numbers/client/src/App.js"],"names":["React","Buttons","Input","ClearButton","ChatMessage","math","PropTypes","isServerLocal","ws_host","ws_port","rws","WebSocket","App","Component","constructor","props","addToInput","val","setState","input","state","addMessage","messages1","handleEqual","messageString","message1","evaluate","data","name","message","send","JSON","stringify","messages","componentDidMount","onopen","console","log","onmessage","evt","parse","onclose","render","e","preventDefault","target","value","map","index"],"mappings":"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","sourcesContent":["// In SRC directory\n\nimport React from 'react';\nimport './App.css';\n//import Chat from './Chat';\nimport {Buttons} from './Component/Buttons';\nimport {Input} from './Component/Input';\nimport {ClearButton} from './Component/ClearButton'\nimport ChatMessage from './chatMessage'\nimport * as math from 'mathjs';\nimport PropTypes from 'prop-types'\n// import Button from 'react-bootstrap/Button';\n// import * as math from 'https://unpkg.com/mathjs@6.2.3/dist/math.js';\n\n// let HOST = window.location.origin.replace(/^http/, 'ws')\n// const Html5WebSocket = require('html5-websocket');\n// const ReconnectingWebSocket = require('reconnecting-websocket');\nlet isServerLocal = true;\n// let ws_host = 'https://calci-chat.herokuapp.com/';\n// let ws_port = process.env.PORT || 80;\nlet ws_host = 'localhost';\nlet ws_port = '3000';\nif (isServerLocal == true) {\n    let ws_host = 'localhost';\n    let ws_port = '3030';\n}\n// const HOST = 'ws://localhost:3030'\n\n// const options = { constructor: Html5WebSocket };\n// const rws = new ReconnectingWebSocket('ws://' + ws_host + ':' + ws_port + '/ws', undefined);\nconst rws = new WebSocket('ws://' + ws_host + ':' + ws_port + '/ws');\n// rws.timeout = 1000;\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n      name: \"\",\n      input: \"\",\n      messages1: [],\n      messages: [],\n\n    };\n  }\n\n  // ws = new WebSocket(HOST)\n\n  componentDidMount() {\n\n    rws.onopen = () => {\n        // on connecting, do nothing but log it to the console\n        console.log('connected')\n      }\n\n    rws.onmessage = evt => {\n      // on receiving a message, add it to the list of messages\n      const val = JSON.parse(evt.data)\n      this.addMessage(val)\n    }\n\n    rws.onclose = () => {\n      console.log('disconnected')\n      // automatically try to reconnect on connection loss\n      this.setState({\n        rws: new WebSocket('ws://' + ws_host + ':' + ws_port + '/ws'),\n      })\n    }\n  }\n\n  // propTypes = {\n  //   onSubmitMessage: PropTypes.func.isRequired,\n  // }\n\n  addToInput = val => {\n    this.setState({input: this.state.input + val});\n  }\n\n  addMessage = val => {\n    this.setState(\n      {messages1:  [val, ...this.state.messages1]}\n      );\n  }\n\n  handleEqual = messageString => {\n    let message1 = this.state.input + ' = ' + math.evaluate(this.state.input)\n    const data = { name: this.state.name, message: message1 }\n    rws.send(JSON.stringify(data))\n    this.setState(\n      { input: message1,\n        messages:  [data, ...this.state.messages],\n        messages1:  [data, ...this.state.messages1]}\n      );\n      \n  }\n\n  render() {\n    return (\n      <div className=\"split\">\n        <div className = \"right\">\n          <div className=\"calc-wrapper\">\n            <Input input={this.state.input}></Input>\n            <div className=\"row\">\n              <Buttons handleClick={this.addToInput}>7</Buttons>\n              <Buttons handleClick={this.addToInput}>8</Buttons>\n              <Buttons handleClick={this.addToInput}>9</Buttons>\n              <Buttons handleClick={this.addToInput}>/</Buttons>\n            </div>\n            <div className=\"row\">\n              <Buttons handleClick={this.addToInput}>4</Buttons>\n              <Buttons handleClick={this.addToInput}>5</Buttons>\n              <Buttons handleClick={this.addToInput}>6</Buttons>\n              <Buttons handleClick={this.addToInput}>*</Buttons>\n            </div>\n            <div className=\"row\">\n              <Buttons handleClick={this.addToInput}>1</Buttons>\n              <Buttons handleClick={this.addToInput}>2</Buttons>\n              <Buttons handleClick={this.addToInput}>3</Buttons>\n              <Buttons handleClick={this.addToInput}>+</Buttons>\n            </div>\n            <div className=\"row\">\n              <Buttons handleClick={this.addToInput}>.</Buttons>\n              <Buttons handleClick={this.addToInput}>0</Buttons>\n              <Buttons handleClick={() => this.handleEqual()}>=</Buttons>\n              <Buttons handleClick={this.addToInput}>-</Buttons>\n            </div>\n            <div className=\"row\">\n              <ClearButton handleClear={() => this.setState({input: \"\"})}>Clear</ClearButton>\n            </div>\n          </div>\n        </div>\n        \n        <div className = \"left\">\n          \n          <div>\n          <h1> Welcome {this.state.name}</h1>\n          <form action = \".\" \n                onSubmit={e => {\n                e.preventDefault()\n                this.setState({ name: '' })\n                }}>\n                <label htmlFor=\"name\">\n                  <input\n                    type=\"text\"\n                    id={'name'}\n                    placeholder={'Enter your name...'}\n                    value={this.state.name}\n                    onChange={e => this.setState({ name: e.target.value })\n                  }\n                  />\n                </label>\n          </form>\n          </div>\n            {this.state.messages1.map((message, index) =>\n            <ChatMessage\n              key={index}\n              message={message.message}\n              name={message.name}\n            />,\n          )}\n        \n        \n        </div>\n      </div>\n    )\n  }\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"F:\\\\react-bootcamp\\\\Chat-Numbers\\\\client\\\\src\\\\App.js\";\n// In SRC directory\nimport React from 'react';\nimport './App.css'; //import Chat from './Chat';\n\nimport { Buttons } from './Component/Buttons';\nimport { Input } from './Component/Input';\nimport { ClearButton } from './Component/ClearButton';\nimport ChatMessage from './chatMessage';\nimport * as math from 'mathjs';\nimport { element } from 'prop-types'; // import PropTypes from 'prop-types'\n// import Button from 'react-bootstrap/Button';\n// import * as math from 'https://unpkg.com/mathjs@6.2.3/dist/math.js';\n// var HOST = window.location.origin.replace(/^http/, 'ws')\n// const Html5WebSocket = require('html5-websocket');\n// const ReconnectingWebSocket = require('reconnecting-websocket');\n\nlet isServerLocal = true;\nvar ws_host = 'https://calci-chat.herokuapp.com/';\nvar ws_port = process.env.PORT || 80;\nconsole.log(ws_port);\n\nif (isServerLocal) {\n  ws_host = 'localhost';\n  ws_port = '3030';\n} // const HOST = 'ws://localhost:3030'\n// const options = { constructor: Html5WebSocket };\n// const rws = new ReconnectingWebSocket('ws://' + ws_host + ':' + ws_port + '/ws', undefined);\n\n\nconst rws = new WebSocket('ws://' + ws_host + ':' + ws_port + '/ws'); // var rws = new WebSocket(HOST);\n\nvar el; // rws.timeout = 1000;\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.addToInput = val => {\n      this.setState({\n        input: this.state.input + val\n      });\n    };\n\n    this.addMessage = val => {\n      console.log(\"efvhbvk: \", JSON.parse(val));\n      console.log(this.state.elements);\n      this.setState({\n        messages1: [val, ...this.state.messages1],\n        elements: [JSON.parse(val), ...this.state.elements] // elements: this.state.elements.add(JSON.parse(val))\n\n      });\n    };\n\n    this.handleEqual = messageString => {\n      let message1 = this.state.input + ' = ' + math.evaluate(this.state.input);\n      const data = {\n        name: this.state.name,\n        message: message1\n      };\n      console.log(\"Handle Equal: \", JSON.stringify(data));\n      rws.send(JSON.stringify(data));\n      this.componentDidMount();\n      this.setState({\n        input: message1,\n        messages: [data, ...this.state.messages],\n        messages1: [data, ...this.state.messages1]\n      });\n    };\n\n    this.state = {\n      name: \"\",\n      input: \"\",\n      messages1: [],\n      messages: [],\n      elements: []\n    };\n  } // ws = new WebSocket(HOST)\n\n\n  componentDidMount() {\n    rws.onopen = () => {\n      // on connecting, do nothing but log it to the console\n      console.log('connected');\n    };\n\n    rws.onmessage = evt => {\n      // on receiving a message, add it to the list of messages\n      console.log(JSON.parse(evt.data));\n      const val = JSON.parse(evt.data);\n      val.forEach(element => this.addMessage(element)); // this.addMessage(val)\n    };\n\n    rws.onclose = () => {\n      console.log('disconnected'); // automatically try to reconnect on connection loss\n\n      this.setState({\n        // rws: new WebSocket(HOST)\n        rws: new WebSocket('ws://' + ws_host + ':' + ws_port + '/ws')\n      });\n    };\n  } // propTypes = {\n  //   onSubmitMessage: PropTypes.func.isRequired,\n  // }\n\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"split\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"calc-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      input: this.state.input,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Buttons, {\n      handleClick: this.addToInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 15\n      }\n    }, \"7\"), /*#__PURE__*/React.createElement(Buttons, {\n      handleClick: this.addToInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 15\n      }\n    }, \"8\"), /*#__PURE__*/React.createElement(Buttons, {\n      handleClick: this.addToInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 15\n      }\n    }, \"9\"), /*#__PURE__*/React.createElement(Buttons, {\n      handleClick: this.addToInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 15\n      }\n    }, \"/\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Buttons, {\n      handleClick: this.addToInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 15\n      }\n    }, \"4\"), /*#__PURE__*/React.createElement(Buttons, {\n      handleClick: this.addToInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 15\n      }\n    }, \"5\"), /*#__PURE__*/React.createElement(Buttons, {\n      handleClick: this.addToInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 15\n      }\n    }, \"6\"), /*#__PURE__*/React.createElement(Buttons, {\n      handleClick: this.addToInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 15\n      }\n    }, \"*\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Buttons, {\n      handleClick: this.addToInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 15\n      }\n    }, \"1\"), /*#__PURE__*/React.createElement(Buttons, {\n      handleClick: this.addToInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 15\n      }\n    }, \"2\"), /*#__PURE__*/React.createElement(Buttons, {\n      handleClick: this.addToInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 15\n      }\n    }, \"3\"), /*#__PURE__*/React.createElement(Buttons, {\n      handleClick: this.addToInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 15\n      }\n    }, \"+\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Buttons, {\n      handleClick: this.addToInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 15\n      }\n    }, \".\"), /*#__PURE__*/React.createElement(Buttons, {\n      handleClick: this.addToInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 15\n      }\n    }, \"0\"), /*#__PURE__*/React.createElement(Buttons, {\n      handleClick: () => this.handleEqual(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 15\n      }\n    }, \"=\"), /*#__PURE__*/React.createElement(Buttons, {\n      handleClick: this.addToInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 15\n      }\n    }, \"-\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(ClearButton, {\n      handleClear: () => this.setState({\n        input: \"\"\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 15\n      }\n    }, \"Clear\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 11\n      }\n    }, \" Welcome \", this.state.name), /*#__PURE__*/React.createElement(\"form\", {\n      action: \".\",\n      onSubmit: e => {\n        e.preventDefault();\n        this.setState({\n          name: ''\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      id: 'name',\n      placeholder: 'Enter your name...',\n      value: this.state.name,\n      onChange: e => this.setState({\n        name: e.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 19\n      }\n    })))), console.log(\"Console Log: \", this.state.elements), this.state.elements.map((message, index) => /*#__PURE__*/React.createElement(ChatMessage, {\n      key: index,\n      message: message.message,\n      name: message.name,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 15\n      }\n    }))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["F:/react-bootcamp/Chat-Numbers/client/src/App.js"],"names":["React","Buttons","Input","ClearButton","ChatMessage","math","element","isServerLocal","ws_host","ws_port","process","env","PORT","console","log","rws","WebSocket","el","App","Component","constructor","props","addToInput","val","setState","input","state","addMessage","JSON","parse","elements","messages1","handleEqual","messageString","message1","evaluate","data","name","message","stringify","send","componentDidMount","messages","onopen","onmessage","evt","forEach","onclose","render","e","preventDefault","target","value","map","index"],"mappings":"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","sourcesContent":["// In SRC directory\n\nimport React from 'react';\nimport './App.css';\n//import Chat from './Chat';\nimport {Buttons} from './Component/Buttons';\nimport {Input} from './Component/Input';\nimport {ClearButton} from './Component/ClearButton'\nimport ChatMessage from './chatMessage'\nimport * as math from 'mathjs';\nimport { element } from 'prop-types';\n// import PropTypes from 'prop-types'\n// import Button from 'react-bootstrap/Button';\n// import * as math from 'https://unpkg.com/mathjs@6.2.3/dist/math.js';\n\n// var HOST = window.location.origin.replace(/^http/, 'ws')\n// const Html5WebSocket = require('html5-websocket');\n// const ReconnectingWebSocket = require('reconnecting-websocket');\nlet isServerLocal = true;\nvar ws_host = 'https://calci-chat.herokuapp.com/';\nvar ws_port = process.env.PORT || 80;\nconsole.log(ws_port)\nif (isServerLocal) {\n    ws_host = 'localhost';\n    ws_port = '3030';\n}\n// const HOST = 'ws://localhost:3030'\n\n// const options = { constructor: Html5WebSocket };\n// const rws = new ReconnectingWebSocket('ws://' + ws_host + ':' + ws_port + '/ws', undefined);\n\nconst rws = new WebSocket('ws://' + ws_host + ':' + ws_port + '/ws');\n\n// var rws = new WebSocket(HOST);\nvar el;\n// rws.timeout = 1000;\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n      name: \"\",\n      input: \"\",\n      messages1: [],\n      messages: [],\n      elements: [],\n    };\n  }\n\n  // ws = new WebSocket(HOST)\n\n  componentDidMount() {\n\n    rws.onopen = () => {\n        // on connecting, do nothing but log it to the console\n        console.log('connected')\n      }\n\n    rws.onmessage = evt => {\n      // on receiving a message, add it to the list of messages\n      console.log(JSON.parse(evt.data))\n      const val = JSON.parse(evt.data)\n      val.forEach(element => this.addMessage(element));\n      // this.addMessage(val)\n    }\n\n    rws.onclose = () => {\n      console.log('disconnected')\n      // automatically try to reconnect on connection loss\n      this.setState({\n        // rws: new WebSocket(HOST)\n        rws: new WebSocket('ws://' + ws_host + ':' + ws_port + '/ws'),\n      })\n    }\n  }\n\n  // propTypes = {\n  //   onSubmitMessage: PropTypes.func.isRequired,\n  // }\n\n  addToInput = val => {\n    this.setState({input: this.state.input + val});\n  }\n\n  addMessage = val => {\n    console.log(\"efvhbvk: \", JSON.parse(val))\n    console.log(this.state.elements)\n    this.setState(\n      {messages1:  [val, ...this.state.messages1],\n      elements: [JSON.parse(val), ...this.state.elements]\n      // elements: this.state.elements.add(JSON.parse(val))\n      }\n      );\n  }\n\n  handleEqual = messageString => {\n    let message1 = this.state.input + ' = ' + math.evaluate(this.state.input)\n    const data = { name: this.state.name, message: message1 }\n    console.log(\"Handle Equal: \",JSON.stringify(data))\n    rws.send(JSON.stringify(data))\n    this.componentDidMount()\n    this.setState(\n      { input: message1,\n        messages:  [data, ...this.state.messages],\n        messages1:  [data, ...this.state.messages1],\n      }\n      );\n      \n  }\n\n  render() {\n    return (\n      <div className=\"split\">\n        <div className = \"right\">\n          <div className=\"calc-wrapper\">\n            <Input input={this.state.input}></Input>\n            <div className=\"row\">\n              <Buttons handleClick={this.addToInput}>7</Buttons>\n              <Buttons handleClick={this.addToInput}>8</Buttons>\n              <Buttons handleClick={this.addToInput}>9</Buttons>\n              <Buttons handleClick={this.addToInput}>/</Buttons>\n            </div>\n            <div className=\"row\">\n              <Buttons handleClick={this.addToInput}>4</Buttons>\n              <Buttons handleClick={this.addToInput}>5</Buttons>\n              <Buttons handleClick={this.addToInput}>6</Buttons>\n              <Buttons handleClick={this.addToInput}>*</Buttons>\n            </div>\n            <div className=\"row\">\n              <Buttons handleClick={this.addToInput}>1</Buttons>\n              <Buttons handleClick={this.addToInput}>2</Buttons>\n              <Buttons handleClick={this.addToInput}>3</Buttons>\n              <Buttons handleClick={this.addToInput}>+</Buttons>\n            </div>\n            <div className=\"row\">\n              <Buttons handleClick={this.addToInput}>.</Buttons>\n              <Buttons handleClick={this.addToInput}>0</Buttons>\n              <Buttons handleClick={() => this.handleEqual()}>=</Buttons>\n              <Buttons handleClick={this.addToInput}>-</Buttons>\n            </div>\n            <div className=\"row\">\n              <ClearButton handleClear={() => this.setState({input: \"\"})}>Clear</ClearButton>\n            </div>\n          </div>\n        </div>\n        \n        <div className = \"left\">\n          \n          <div>\n          <h1> Welcome {this.state.name}</h1>\n          <form action = \".\" \n                onSubmit={e => {\n                e.preventDefault()\n                this.setState({ name: '' })\n                }}>\n                <label htmlFor=\"name\">\n                  <input\n                    type=\"text\"\n                    id={'name'}\n                    placeholder={'Enter your name...'}\n                    value={this.state.name}\n                    onChange={e => this.setState({ name: e.target.value })\n                  }\n                  />\n                </label>\n          </form>\n          </div>\n            {console.log(\"Console Log: \", this.state.elements)}\n            {this.state.elements.map((message, index) => \n              <ChatMessage\n              key={index}\n              message = {message.message}\n              name = {message.name} />,\n            )}\n            {/* {this.state.elements.forEach(message =>\n            // console.log(message.name),\n            <ChatMessage\n              key = {0}\n              message={message.message}\n              name={message.name}\n            />,\n          )} */}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}